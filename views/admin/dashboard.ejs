<div class="container-fluid">
  <!-- Page Header -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h2 class="fw-bold text-primary">
        <i class="bi bi-speedometer2 me-2"></i> Admin Dashboard
      </h2>
      <p class="text-muted mb-0">Welcome back! Here's what's happening today.</p>
    </div>
    <div class="d-none d-md-block">
      <div class="btn-group" role="group">
        <button type="button" class="btn btn-outline-secondary">
          <i class="bi bi-download me-1"></i> Export
        </button>
        <button type="button" class="btn btn-primary">
          <i class="bi bi-plus-circle me-1"></i> Add New
        </button>
      </div>
    </div>
  </div>
  
  <!-- Stats Cards -->
  <div class="row g-4 mb-4">
    <div class="col-xl-3 col-md-6">
      <div class="card border-0 shadow-sm h-100">
        <div class="card-body d-flex flex-column">
          <div class="d-flex align-items-center mb-3">
            <div class="icon-box bg-primary bg-opacity-10 text-primary rounded-circle p-3 me-3">
              <i class="bi bi-people-fill fs-4"></i>
            </div>
            <div>
              <h6 class="text-muted mb-0">Total Students</h6>
              <h3 class="fw-bold mb-0"><%= totalStudents %></h3>
            </div>
          </div>
          <div class="mt-auto">
            <div class="d-flex align-items-center text-success">
              <i class="bi bi-arrow-up-short me-1"></i>
              <span class="small">12% from last month</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="col-xl-3 col-md-6">
      <div class="card border-0 shadow-sm h-100">
        <div class="card-body d-flex flex-column">
          <div class="d-flex align-items-center mb-3">
            <div class="icon-box bg-success bg-opacity-10 text-success rounded-circle p-3 me-3">
              <i class="bi bi-journal-bookmark-fill fs-4"></i>
            </div>
            <div>
              <h6 class="text-muted mb-0">Total Courses</h6>
              <h3 class="fw-bold mb-0"><%= totalCourses %></h3>
            </div>
          </div>
          <div class="mt-auto">
            <div class="d-flex align-items-center text-success">
              <i class="bi bi-arrow-up-short me-1"></i>
              <span class="small">5% from last month</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="col-xl-3 col-md-6">
      <div class="card border-0 shadow-sm h-100">
        <div class="card-body d-flex flex-column">
          <div class="d-flex align-items-center mb-3">
            <div class="icon-box bg-warning bg-opacity-10 text-warning rounded-circle p-3 me-3">
              <i class="bi bi-file-earmark-text fs-4"></i>
            </div>
            <div>
              <h6 class="text-muted mb-0">Reports</h6>
              <h3 class="fw-bold mb-0"><%= totalReports %></h3>
            </div>
          </div>
          <div class="mt-auto">
            <div class="d-flex align-items-center text-danger">
              <i class="bi bi-arrow-down-short me-1"></i>
              <span class="small">3% from last month</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="col-xl-3 col-md-6">
      <div class="card border-0 shadow-sm h-100">
        <div class="card-body d-flex flex-column">
          <div class="d-flex align-items-center mb-3">
            <div class="icon-box bg-danger bg-opacity-10 text-danger rounded-circle p-3 me-3">
              <i class="bi bi-person-badge fs-4"></i>
            </div>
            <div>
              <h6 class="text-muted mb-0">Admins</h6>
              <h3 class="fw-bold mb-0"><%= totalAdmins %></h3>
            </div>
          </div>
          <div class="mt-auto">
            <div class="d-flex align-items-center text-success">
              <i class="bi bi-arrow-up-short me-1"></i>
              <span class="small">No change</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Quick Links -->
  <div class="card border-0 shadow-sm mb-4">
    <div class="card-header bg-white border-0 py-3">
      <h5 class="card-title mb-0">
        <i class="bi bi-link-45deg me-2 text-primary"></i> Quick Links
      </h5>
    </div>
    <div class="card-body">
      <div class="row g-3">
        <div class="col-md-3 col-sm-6">
          <a href="/admin/student/add" class="btn btn-outline-primary w-100 d-flex align-items-center justify-content-center">
            <i class="bi bi-person-plus me-2"></i> Add Student
          </a>
        </div>
        <div class="col-md-3 col-sm-6">
          <a href="/admin/students" class="btn btn-outline-success w-100 d-flex align-items-center justify-content-center">
            <i class="bi bi-people me-2"></i> Manage Students
          </a>
        </div>
        <div class="col-md-3 col-sm-6">
          <a href="/admin/course/add" class="btn btn-outline-info w-100 d-flex align-items-center justify-content-center">
            <i class="bi bi-book me-2"></i> Add Course
          </a>
        </div>
        <div class="col-md-3 col-sm-6">
          <a href="/admin/report/all" class="btn btn-outline-warning w-100 d-flex align-items-center justify-content-center">
            <i class="bi bi-file-earmark-text me-2"></i> Manage Reports
          </a>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Chart Section -->
  <div class="card border-0 shadow-sm">
    <div class="card-header bg-white border-0 py-3 d-flex justify-content-between align-items-center">
      <h5 class="card-title mb-0">
        <i class="bi bi-bar-chart-line me-2 text-primary"></i> Students per Course
      </h5>
      <div class="dropdown">
        <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
          <i class="bi bi-funnel me-1"></i> Filter
        </button>
        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownMenuButton">
          <li><a class="dropdown-item" href="#">All Courses</a></li>
          <li><a class="dropdown-item" href="#">Active Courses</a></li>
          <li><a class="dropdown-item" href="#">Upcoming Courses</a></li>
        </ul>
      </div>
    </div>
    <div class="card-body">
      <canvas id="studentCourseChart" height="100"></canvas>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  // Define the data first
  const chartLabels = <%- JSON.stringify(chartLabels) %>;
  const chartData = <%- JSON.stringify(chartData) %>;
  
  // Then build the chart
  const ctx = document.getElementById('studentCourseChart').getContext('2d');
  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: chartLabels,
      datasets: [{
        label: 'Students per Course',
        data: chartData,
        backgroundColor: [
          'rgba(54, 162, 235, 0.7)',
          'rgba(75, 192, 192, 0.7)',
          'rgba(255, 159, 64, 0.7)',
          'rgba(153, 102, 255, 0.7)',
          'rgba(255, 99, 132, 0.7)'
        ],
        borderColor: [
          'rgba(54, 162, 235, 1)',
          'rgba(75, 192, 192, 1)',
          'rgba(255, 159, 64, 1)',
          'rgba(153, 102, 255, 1)',
          'rgba(255, 99, 132, 1)'
        ],
        borderWidth: 1,
        borderRadius: 5,
        barThickness: 'flex',
        maxBarThickness: 60
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: { 
          display: false 
        },
        tooltip: { 
          mode: 'index', 
          intersect: false,
          backgroundColor: 'rgba(255, 255, 255, 0.9)',
          titleColor: '#333',
          bodyColor: '#666',
          borderColor: '#ddd',
          borderWidth: 1,
          padding: 12,
          boxPadding: 6,
          usePointStyle: true,
          callbacks: {
            label: function(context) {
              return `Students: ${context.parsed.y}`;
            }
          }
        }
      },
      scales: {
        y: {
          beginAtZero: true,
          ticks: { 
            stepSize: 1,
            font: {
              size: 12
            }
          },
          grid: {
            color: 'rgba(0, 0, 0, 0.05)'
          }
        },
        x: {
          grid: {
            display: false
          },
          ticks: {
            font: {
              size: 12
            }
          }
        }
      }
    }
  });
</script>