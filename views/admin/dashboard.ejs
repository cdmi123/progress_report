<div class="container">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold text-primary">
      <i class="bi bi-speedometer2"></i> Admin Dashboard
    </h2>
  </div>

  <div class="row g-4">
    <div class="col-md-3">
      <div class="card shadow border-0">
        <div class="card-body text-center">
          <i class="bi bi-person-badge fs-2 text-primary"></i>
          <h5 class="card-title mt-2">Total Students</h5>
          <h3><%= totalStudents %></h3>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card shadow border-0">
        <div class="card-body text-center">
          <i class="bi bi-journal-bookmark-fill fs-2 text-success"></i>
          <h5 class="card-title mt-2">Total Courses</h5>
          <h3><%= totalCourses %></h3>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card shadow border-0">
        <div class="card-body text-center">
          <i class="bi bi-bar-chart-line-fill fs-2 text-warning"></i>
          <h5 class="card-title mt-2">Reports</h5>
          <h3><%= totalReports %></h3>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card shadow border-0">
        <div class="card-body text-center">
          <i class="bi bi-person-circle fs-2 text-danger"></i>
          <h5 class="card-title mt-2">Admins</h5>
          <h3><%= totalAdmins %></h3>
        </div>
      </div>
    </div>
  </div>

  <div class="mt-5">
    <h4 class="mb-3">ðŸ“Œ Quick Links</h4>
    <div class="row g-3">
      <div class="col-md-3">
        <a href="/admin/student/add" class="btn btn-outline-primary w-100">
          <i class="bi bi-person-plus"></i> Add Student
        </a>
      </div>
      <div class="col-md-3">
        <a href="/admin/students" class="btn btn-outline-success w-100">
          <i class="bi bi-people"></i> Manage Students
        </a>
      </div>
      <div class="col-md-3">
        <a href="/admin/course/add" class="btn btn-outline-info w-100">
          <i class="bi bi-book"></i> Add Course
        </a>
      </div>
      <div class="col-md-3">
        <a href="/admin/report/all" class="btn btn-outline-warning w-100">
          <i class="bi bi-file-earmark-text"></i> Manage Reports
        </a>
      </div>
    </div>
  </div>

  <div class="mt-5">
    <h4 class="mb-3">ðŸ“Š Students per Course</h4>
    <canvas id="studentCourseChart" height="100"></canvas>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
  // âœ… Define the data first
  const chartLabels = <%- JSON.stringify(chartLabels) %>;
  const chartData = <%- JSON.stringify(chartData) %>;

  // âœ… Then build the chart
  const ctx = document.getElementById('studentCourseChart').getContext('2d');

  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: chartLabels,
      datasets: [{
        label: 'Students per Course',
        data: chartData,
        backgroundColor: 'rgba(54, 162, 235, 0.7)',
        borderColor: 'rgba(54, 162, 235, 1)',
        borderWidth: 1
      }]
    },
    options: {
      responsive: true,
      plugins: {
        legend: { display: false },
        tooltip: { mode: 'index', intersect: false }
      },
      scales: {
        y: {
          beginAtZero: true,
          ticks: { stepSize: 1 }
        }
      }
    }
  });
</script>
