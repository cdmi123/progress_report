<div class="container-fluid py-4">
  <!-- Page Header -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h2 class="fw-bold text-primary">
        <i class="bi bi-person-plus-fill me-2"></i> Update Staff
      </h2>
      <p class="text-muted mb-0">Update staff account with the details below</p>
    </div>
    <a href="/admin/students" class="btn btn-outline-primary d-flex align-items-center">
      <i class="bi bi-arrow-left me-2"></i> Back to Staff List
    </a>
  </div>

  <!-- Form Card -->
  <div class="card border-0 shadow-sm">
    <div class="card-header bg-white border-0 py-3">
      <h5 class="card-title mb-0">
        <i class="bi bi-person-badge me-2 text-primary"></i> Staff Information
      </h5>
    </div>
    <div class="card-body">
      <form method="POST" id="staffForm">
        <div class="row g-4">
          <div class="col-md-6">
            <div class="form-floating mb-3">
              <input name="email" type="email" class="form-control" id="email" placeholder="name@example.com" required value="<%= admin.email %>">
              <label for="email">
                <i class="bi bi-envelope me-1"></i> Email Address
              </label>
            </div>
          </div>
          
          <div class="col-md-6">
            <div class="form-floating mb-3">
              <input name="password" type="password" class="form-control" id="password" placeholder="Password" required value="<%= admin.password %>">
              <label for="password">
                <i class="bi bi-lock me-1"></i> Password
              </label>
            </div>
          </div>
          
          <div class="col-md-6">
            <div class="form-floating mb-3">
              <input name="contact" type="tel" class="form-control" id="contact" placeholder="1234567890" 
                     pattern="^[0-9]{10}$" title="Enter a 10-digit mobile number" required value="<%= admin.contact %>">
              <label for="contact">
                <i class="bi bi-telephone me-1"></i> Phone Number
              </label>
              <div class="form-text">Enter a 10-digit mobile number</div>
            </div>
          </div>
          
          <div class="col-md-6">
            <div class="form-floating mb-3">
              <input name="name" type="text" class="form-control" id="facultyName" placeholder="Faculty Name" required value="<%= admin.name %>">
              <label for="facultyName">
                <i class="bi bi-building me-1"></i> Faculty Name
              </label>
            </div>
          </div>

          <div class="col-md-6">
            <div class="form-floating mb-3">
              <select name="role" id="" class="form-control">
                <option disabled selected>Select Staff Role</option>
                <option value="1" <% if(admin.role==1) {  %> selected <% } %> >Admin</option>
                <option value="2" <% if(admin.role==2) {  %> selected <% } %>>staff</option>
              </select>
            </div>
          </div>

           <div class="col-md-6">
            <div class="form-floating mb-3">
              <select name="status" id="" class="form-control">
                <option disabled selected>Select Status</option>
                <option value="Active"  <% if(admin.status=='Active') {  %> selected <% } %>>Active</option>
                <option value="De-active"  <% if(admin.status=='De-active') {  %> selected <% } %>>De-active</option>
              </select>
            </div>
          </div>
        </div>

        
        
        <div class="d-flex justify-content-between align-items-center mt-4 pt-3 border-top">
          <div>
            <button type="reset" class="btn btn-outline-secondary me-2">
              <i class="bi bi-arrow-clockwise me-2"></i> Reset
            </button>
            <button type="submit" class="btn btn-primary">
              <i class="bi bi-check-circle me-2"></i> Update Staff
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Signature Script -->
<script src="https://cdn.jsdelivr.net/npm/signature_pad@4.1.5/dist/signature_pad.umd.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.14.0-beta2/js/bootstrap-select.min.js"></script>

<script>
  // Initialize Signature Pad
  const canvas = document.getElementById('signature-pad');
  const signaturePad = new SignaturePad(canvas, {
    backgroundColor: 'rgb(255, 255, 255)',
    penColor: 'rgb(0, 0, 0)'
  });
  
  // Resize canvas to match its display size
  function resizeCanvas() {
    const ratio = Math.max(window.devicePixelRatio || 1, 1);
    canvas.width = canvas.offsetWidth * ratio;
    canvas.height = canvas.offsetHeight * ratio;
    canvas.getContext('2d').scale(ratio, ratio);
    signaturePad.clear();
  }
  
  window.addEventListener('resize', resizeCanvas);
  resizeCanvas();
  
  // Clear signature
  function clearSignature() {
    signaturePad.clear();
  }
  
  // Save signature
  function saveSignature() {
    if (signaturePad.isEmpty()) {
      alert('Please provide a signature first.');
      return;
    }
    
    const dataURL = signaturePad.toDataURL();
    document.getElementById('signatureData').value = dataURL;
    
    // Close modal
    const modal = bootstrap.Modal.getInstance(document.getElementById('signatureModal'));
    modal.hide();
    
    // Show success message
    showNotification('Signature saved successfully!', 'success');
  }
  
  // Form submission
  document.getElementById('staffForm').addEventListener('submit', function(e) {
    const signatureData = document.getElementById('signatureData').value;
    
    if (!signatureData) {
      e.preventDefault();
      showNotification('Please add a signature before submitting.', 'warning');
      document.getElementById('signatureModal').click();
    }
  });
  
  // Show notification
  function showNotification(message, type) {
    const alertDiv = document.createElement('div');
    alertDiv.className = `alert alert-${type} alert-dismissible fade show position-fixed top-0 end-0 m-3`;
    alertDiv.style.zIndex = '9999';
    alertDiv.innerHTML = `
      ${message}
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    `;
    document.body.appendChild(alertDiv);
    
    // Auto dismiss after 3 seconds
    setTimeout(() => {
      alertDiv.classList.remove('show');
      setTimeout(() => alertDiv.remove(), 150);
    }, 3000);
  }
</script>